# ã€é€ è½®å­ã€‘treei â€”â€” ä¸€ä¸ªç”¨äºè¾“å‡ºç›®å½•æ ‘å½¢ç»“æ„çš„å‘½ä»¤è¡Œå·¥å…·

## å‰è¨€

å†™åšå®¢çš„æ—¶å€™ï¼Œå¯èƒ½ç»å¸¸è¦ç”¨åˆ°ç±»ä¼¼ linux ç³»ç»Ÿä¸­çš„ tree å‘½ä»¤ï¼Œç”¨æ¥åœ¨æ–‡ç« ä¸­å±•ç¤ºç›®å½•çš„æ ‘å½¢ç»“æ„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§å½¢å¼:

```
â”œâ”€â”€.gitignore
â”œâ”€â”€.release-it.json
â”œâ”€â”€CHANGELOG.md
â”œâ”€â”€package-lock.json
â”œâ”€â”€package.json
â”œâ”€â”€README.md
â””â”€â”€src
|   â””â”€â”€index.js
```

ä½†æ˜¯ï¼Œåœ¨ windows ç³»ç»Ÿä¸­ï¼Œå¹¶æ²¡æœ‰ tree å‘½ä»¤ã€‚

ä¹‹å‰ä¹Ÿç”¨è¿‡ [treer](https://www.npmjs.com/package/treer) è¿™ä¸ªå·¥å…·ï¼Œæ€»ä½“æ¥è¯´è›®å¥½ç”¨çš„ï¼Œä½†æ˜¯æˆ‘æƒ³åŠ ç‚¹æ–°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚:

- æ”¯æŒå°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶æ—¶ä½¿ç”¨è¿½åŠ æ¨¡å¼ï¼Œè€Œä¸æ˜¯è¦†ç›–æ¨¡å¼
- æ”¯æŒç”¨ emoji åŒºåˆ†æ–‡ä»¶å’Œæ–‡ä»¶å¤¹

äºæ˜¯ï¼Œæœ¬ç€å­¦ä¹ çš„ç›®çš„ï¼Œæˆ‘å°±é€ äº†ä¸€ä¸ªè½®å­ [treei](https://www.npmjs.com/package/treei)ã€‚

è‡ªå·±ç”¨äº†ä¸€æ®µæ—¶é—´åï¼Œå‘ç°è¿˜çœŸæŒºå¥½ç”¨çš„ï¼Œå“ˆå“ˆã€‚

## å‡†å¤‡å·¥ä½œ

ç”¨åˆ°çš„ä¾èµ–:

- `fs`: Node.js å†…ç½®æ¨¡å—ï¼Œæä¾›äº†æ–‡ä»¶æ“ä½œç›¸å…³çš„åŠŸèƒ½
- `commander`: Node.js å‘½ä»¤è¡Œç•Œé¢çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ
- `release-it`: ç”¨äºç®¡ç† npm åŒ…çš„ç‰ˆæœ¬å’Œå‘å¸ƒç­‰å·¥ä½œ

## å®ç°

## è°ƒè¯•

ç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†æ‰€æœ‰åŠŸèƒ½çš„å¼€å‘ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¿›è¡Œè°ƒè¯•äº†ã€‚

ä½†æ€»ä¸èƒ½å°†åŒ…å‘å¸ƒåˆ° `npm` åå†ä¸‹è½½ä¸‹æ¥è¿›è¡Œè°ƒè¯•å§ï¼Ÿ

å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ `npm link` å‘½ä»¤ï¼Œå°†åŒ…é“¾æ¥åˆ°å…¨å±€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ªåŒ…äº†ã€‚

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ:

```bash
npm link
```

æŸ¥çœ‹å…¨å±€å®‰è£…åŒ…:

```bash
$ npm ls  -g
D:\software\nvm\nodejs -> .\
â”œâ”€â”€ @antfu/ni@0.21.12
â”œâ”€â”€ http-server@14.1.1
â”œâ”€â”€ npm@9.6.7
â”œâ”€â”€ nrm@1.2.6
â”œâ”€â”€ pnpm@8.6.12
â”œâ”€â”€ treei@1.2.3 -> .\..\..\..\www\github\wheels\treei
â”œâ”€â”€ typescript@5.3.3
```

å¯ä»¥çœ‹åˆ° `npm link` å…¶å®å°±æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªæŒ‡å‘ `treei` é¡¹ç›®çš„ **è½¯è¿æ¥**ã€‚

ç®€å•æµ‹è¯•ä¸‹æ•ˆæœ:

```bash
treei $ (main) treei -i '.git|node_modules' --icon
D:\www\github\wheels\treei
â”œâ”€â”€ğŸ“„.gitignore
â”œâ”€â”€ğŸ“„.release-it.json
â”œâ”€â”€ğŸ“„CHANGELOG.md
â”œâ”€â”€ğŸ“„package-lock.json
â”œâ”€â”€ğŸ“„package.json
â”œâ”€â”€ğŸ“„README.md
â””â”€â”€ğŸ“src
|   â”œâ”€â”€ğŸ“„config.js
|   â”œâ”€â”€ğŸ“„generate.js
|   â”œâ”€â”€ğŸ“„index.js
|   â”œâ”€â”€ğŸ“„toTree.js
|   â””â”€â”€ğŸ“„utils.js
```

:tada::tada::tada:


## å‘å¸ƒ

### æ‰‹åŠ¨ç®¡ç†

å¦‚æœæ²¡è´¦å·å°±åŠ æ·»åŠ ä¸€ä¸ªè´¦å·ï¼Œæœ‰è´¦å·å°±ç™»å½•ç„¶åå‘å¸ƒå³å¯ã€‚

```bash
# ç™»å½•
npm login
# å‘å¸ƒ
npm publish
```

å‘å¸ƒæˆåŠŸåï¼Œå°±å¯ä»¥åœ¨ npm ä¸Šæœç´¢åˆ°è¿™ä¸ªåŒ…äº†ã€‚

https://www.npmjs.com/package/treei

ä½†æ˜¯ï¼Œå¦‚æœåç»­æœ‰æ›´æ–°çš„è¯ï¼Œæ¯æ¬¡éƒ½å¾—æ‰‹åŠ¨æ›´æ”¹**ç‰ˆæœ¬å·**ï¼Œç„¶åå†æ¬¡æ‰§è¡Œ `npm login` å’Œ `npm publish`ã€‚

æ˜¾ç„¶ï¼Œè¿™æ ·é‡å¤çš„æ“ä½œå¤ªç¹çäº†ï¼Œè€Œä¸”è¿˜å®¹æ˜“å‡ºé”™ã€‚

å› æ­¤æ‰‹åŠ¨ç®¡ç†åŒ…çš„ç‰ˆæœ¬å‘å¸ƒæ˜¯ä¸æ¨èçš„ã€‚

### è‡ªåŠ¨ç®¡ç†

[release-it](https://github.com/release-it/release-it)

ä¸€å¥è¯ä»‹ç» `release-it`: ä¸€ä¸ªè‡ªåŠ¨ç®¡ç†åŒ…ç‰ˆæœ¬å’ŒåŒ…å‘å¸ƒç›¸å…³ä»»åŠ¡çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

å®‰è£…:

```bash
npm install release-it -D
```

é…ç½® `package.json`:

```json
{
  "scripts": {
    "release": "release-it"
  }
}
```

ç”±äºè¿™é‡Œæˆ‘ä½¿ç”¨äº†è‡ªåŠ¨ç”Ÿæˆ `changelog` çš„åŠŸèƒ½ï¼Œå› æ­¤è¿˜éœ€è¦å®‰è£…ä¸€ä¸ª `release-it` çš„æ’ä»¶:

```bash
npm install @release-it/conventional-changelog -D
```

åœ¨æ ¹ç›®å½•åˆ›å»º `release-it.json` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:

```json
{
  "github": {
    "release": true,
    "web": true,
    "autoGenerate": true
  },
  "git": {
    "commitMessage": "release: v${version}"
  },
  "npm": {
    "publish": true
  },
  "hooks": {
    "after:bump": "echo æ›´æ–°ç‰ˆæœ¬æˆåŠŸ"
  },
  "plugins": {
    "@release-it/conventional-changelog": {
      "preset": "angular",
      "infile": "CHANGELOG.md"
    }
  }
}
```

æ‰§è¡Œå‘½ä»¤:

```bash
npm run release
```

è¿‡ç¨‹å¤§æ¦‚å¦‚ä¸‹å›¾æ‰€ç¤º:

![release](./images/release.png)

æ‰§è¡ŒæˆåŠŸåå°±å¯ä»¥åœ¨ `npm` æ‰¾åˆ°è¿™ä¸ªåŒ…äº†ã€‚

https://www.npmjs.com/package/treei

## æ€»ç»“

è¿™é‡Œæˆ‘ä»¬æ‰‹æ‘¸æ‰‹å®Œæˆäº†ä¸€ä¸ªåŒ…çš„å¼€å‘ï¼Œæµ‹è¯•ï¼Œå‘å¸ƒç­‰å·¥ä½œã€‚

ä¼¼ä¹ä¸€åˆ‡éƒ½æ˜¯é‚£ä¹ˆçš„ç®€å•ï¼Œå°±åƒå‘¼å¸ä¸€æ ·ï¼Œå¼€ä¸ªç©ç¬‘ï¼Œå“ˆå“ˆã€‚

æ¥çœ‹ä¸‹ï¼Œæ•´ä¸ªè¿‡ç¨‹æˆ‘ä»¬å­¦åˆ°äº†ä»€ä¹ˆ:

- å¦‚ä½•å†™ä¸€ä¸ªNodeå‘½ä»¤è¡Œå·¥å…·
- npm åŒ…çš„æœ¬åœ°è°ƒè¯•
- `release-it` åŒ…ç‰ˆæœ¬æ§åˆ¶
